<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>4대보험료 계산기</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .ins-tax-container { 
            max-width: 800px; 
            margin: 40px auto; 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.3);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }
        .ins-tax-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 400% 400%;
            animation: gradient 3s ease infinite;
        }
        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .ins-tax-title { 
            font-size: 2.2em; 
            font-weight: 700; 
            margin-bottom: 30px; 
            color: #2c3e50; 
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .top-bar { 
            display: flex; 
            justify-content: flex-end;
            margin-bottom: 30px; 
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        .main-btn { 
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff; 
            border: none; 
            border-radius: 12px; 
            padding: 12px 24px; 
            font-size: 1em; 
            font-weight: 600; 
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            text-decoration: none;
            display: inline-block;
        }
        .main-btn:hover { 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        .ins-tax-form { 
            background: rgba(248, 250, 252, 0.8);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-group label { 
            display: block;
            font-weight: 600; 
            color: #2c3e50;
            margin-bottom: 8px; 
            font-size: 1.05em;
        }
        .form-group input, .form-group select { 
            width: 100%; 
            padding: 12px 16px; 
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 10px; 
            font-size: 1em;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        .radio-group label {
            display: flex !important;
            align-items: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 16px;
            border-radius: 10px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 400 !important;
            margin-bottom: 0 !important;
        }
        .radio-group label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        .radio-group input[type="radio"] {
            margin-right: 8px;
            width: auto;
        }
        .submit-btn { 
            width: 100%; 
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff; 
            border: none; 
            border-radius: 12px; 
            padding: 16px; 
            font-size: 1.1em; 
            font-weight: 600; 
            cursor: pointer; 
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .submit-btn:hover { 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        .result-box { 
            background: linear-gradient(135deg, #e8f5e8, #f0fff0);
            border-radius: 16px; 
            padding: 25px; 
            margin-top: 25px; 
            font-size: 1.1em; 
            color: #2c3e50;
            border-left: 4px solid #28a745;
        }
        .help-text {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
            line-height: 1.4;
        }
        .input-icon {
            position: relative;
        }
        .input-icon::before {
            content: attr(data-icon);
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1em;
            z-index: 2;
        }
        .input-icon input {
            padding-left: 45px;
        }
        @media (max-width: 768px) {
            .ins-tax-container {
                margin: 20px auto;
                padding: 25px;
            }
            .ins-tax-title {
                font-size: 1.8em;
            }
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="ins-tax-container">
        <div class="top-bar">
            <a href="{{ url_for('main') }}" class="main-btn">? 메인으로</a>
        </div>
        
        <div class="ins-tax-title">?? 4대보험료 계산기</div>
        
        <form class="ins-tax-form" id="insTaxForm" onsubmit="return false;">
            <div class="form-group">
                <label>? 급여액</label>
                <div class="radio-group">
                    <label><input type="radio" name="salaryType" value="month" checked> 월급</label>
                    <label><input type="radio" name="salaryType" value="year"> 연봉</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>? 급여 금액 (원)</label>
                <div class="input-icon" data-icon="?">
                    <input type="text" id="salary" required pattern="[0-9,]*" placeholder="예: 3,000,000">
                </div>
                <div class="help-text">비과세 급여를 포함한 총 급여액을 입력하세요</div>
            </div>
            
            <div class="form-group">
                <label>?? 비과세 급여 (원)</label>
                <div class="input-icon" data-icon="??">
                    <input type="text" id="taxFree" value="0" required pattern="[0-9,]*" placeholder="예: 200,000">
                </div>
                <div class="help-text">식대, 자가운전 보조금, 육아수당 등 비과세 항목</div>
            </div>
            
            <div class="form-group">
                <label>??????? 부양가족수 (본인 포함)</label>
                <select id="familyCount">
                    <option value="1">1명 (본인만)</option>
                    <option value="2">2명</option>
                    <option value="3">3명</option>
                    <option value="4">4명</option>
                    <option value="5">5명</option>
                    <option value="6">6명 이상</option>
                </select>
                <div class="help-text">소득세 계산 시 고려되는 부양가족 수</div>
            </div>
            
            <div class="form-group">
                <label>? 8세 이상 20세 이하 자녀수</label>
                <select id="childCount">
                    <option value="0">0명</option>
                    <option value="1">1명</option>
                    <option value="2">2명</option>
                    <option value="3">3명</option>
                    <option value="4">4명</option>
                    <option value="5">5명 이상</option>
                </select>
                <div class="help-text">연간 소득 100만원 이하인 자녀만 해당 (세액공제 대상)</div>
            </div>
            
            <button type="submit" class="submit-btn">? 계산하기</button>
        </form>
        
        <div class="result-box" id="resultBox" style="display:none;"></div>
        
        <div style="background:rgba(108, 117, 125, 0.1);border-radius:12px;padding:20px;margin-top:25px;">
            <h4 style="color:#495057;margin-bottom:15px;">? 2025년 4대보험 요율</h4>
            <div style="font-size:0.95em;color:#6c757d;line-height:1.6;">
                <p><strong>? 건강보험:</strong> 7.09% (근로자 3.545%, 사업주 3.545%)</p>
                <p><strong>? 장기요양보험:</strong> 건강보험료의 12.95%</p>
                <p><strong>?? 국민연금:</strong> 9.0% (근로자 4.5%, 사업주 4.5%)</p>
                <p><strong>? 고용보험:</strong> 근로자 0.8%, 사업주 0.9%</p>
                <p><strong>?? 산재보험:</strong> 사업주 전액 부담 (업종별 0.25%~34%)</p>
            </div>
        </div>
    </div>
    <script>
    // 3자리 콤마
    function addComma(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    function removeComma(str) {
        return str.replace(/,/g, '');
    }
    
    // 입력란 콤마 자동
    ['salary','taxFree'].forEach(id => {
        const el = document.getElementById(id);
        el.addEventListener('input', function(e) {
            let val = removeComma(this.value);
            if (val) this.value = addComma(Number(val));
        });
    });
    
    // 라디오 버튼 선택 효과
    document.querySelectorAll('input[type="radio"]').forEach(radio => {
        radio.addEventListener('change', function() {
            // 같은 name의 다른 라벨들 스타일 초기화
            document.querySelectorAll(`input[name="${this.name}"]`).forEach(r => {
                const label = r.closest('label');
                if (label) {
                    label.style.borderColor = 'rgba(102, 126, 234, 0.2)';
                    label.style.background = 'rgba(255, 255, 255, 0.8)';
                }
            });
            
            // 선택된 라벨 스타일 적용
            const selectedLabel = this.closest('label');
            if (selectedLabel) {
                selectedLabel.style.borderColor = '#667eea';
                selectedLabel.style.background = 'rgba(102, 126, 234, 0.1)';
            }
        });
    });
    
    // 2025년 4대보험 요율
    const RATES = {
        health: 0.0709, // 건강보험 (근로자 + 사업주)
        health_worker: 0.03545, // 건강보험 (근로자 부분)
        health_employer: 0.03545, // 건강보험 (사업주 부분)
        longterm: 0.1295, // 장기요양보험(건강보험료의 12.95%)
        pension: 0.090, // 국민연금 (전체)
        pension_worker: 0.045, // 국민연금 (근로자 부분)
        pension_employer: 0.045, // 국민연금 (사업주 부분)
        employment_worker: 0.008, // 고용보험 (근로자)
        employment_employer: 0.009, // 고용보험 (사업주)
        industrial: 0.0065 // 산재보험(사업주 전액, 일반적인 요율)
    };
    
    document.getElementById('insTaxForm').addEventListener('submit', function() {
        let salary = parseInt(removeComma(document.getElementById('salary').value)) || 0;
        const salaryType = document.querySelector('input[name="salaryType"]:checked').value;
        const taxFree = parseInt(removeComma(document.getElementById('taxFree').value)) || 0;
        const familyCount = parseInt(document.getElementById('familyCount').value);
        const childCount = parseInt(document.getElementById('childCount').value);
        
        // 연봉 입력 시 월환산
        if(salaryType==='year') {
            salary = Math.floor(salary/12);
        }
        
        // 4대보험 계산 기준 금액 (비과세 20만원 초과분만 제외)
        const salaryForIns = salary - Math.max(taxFree-200000, 0);
        
        // 건강보험 (근로자 부담)
        const healthWorker = Math.floor(salaryForIns * RATES.health_worker);
        // 건강보험 (사업주 부담)
        const healthEmployer = Math.floor(salaryForIns * RATES.health_employer);
        // 장기요양보험 (근로자 부담)
        const longtermWorker = Math.floor(healthWorker * RATES.longterm);
        // 장기요양보험 (사업주 부담)
        const longtermEmployer = Math.floor(healthEmployer * RATES.longterm);
        // 국민연금 (근로자 부담)
        const pensionWorker = Math.floor(salaryForIns * RATES.pension_worker);
        // 국민연금 (사업주 부담)
        const pensionEmployer = Math.floor(salaryForIns * RATES.pension_employer);
        // 고용보험(근로자)
        const employmentWorker = Math.floor(salaryForIns * RATES.employment_worker);
        // 고용보험(사업주)
        const employmentEmployer = Math.floor(salaryForIns * RATES.employment_employer);
        // 산재보험(사업주 전액)
        const industrial = Math.floor(salaryForIns * RATES.industrial);
        
        // 총 보험료 계산
        const totalWorker = healthWorker + longtermWorker + pensionWorker + employmentWorker;
        const totalEmployer = healthEmployer + longtermEmployer + pensionEmployer + employmentEmployer + industrial;
        const grandTotal = totalWorker + totalEmployer;
        
        const resultBox = document.getElementById('resultBox');
        resultBox.style.display = 'block';
        resultBox.innerHTML =
            `<div style='text-align:center;margin-bottom:20px;'>
                <h4 style='color:#2c3e50;margin-bottom:15px;'>?? 4대보험료 계산 결과</h4>
                <div style='background:rgba(255,255,255,0.8);padding:15px;border-radius:10px;margin-bottom:15px;'>
                    <div style='font-size:0.9em;color:#6c757d;margin-bottom:5px;'>계산 기준 급여</div>
                    <div style='font-size:1.2em;font-weight:600;color:#495057;'>${addComma(salaryForIns)}원 (${salaryType==='year'?'연봉을 월 환산':'월급'})</div>
                </div>
            </div>
            
            <div style='display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;'>
                <!-- 근로자 부담 -->
                <div style='background:rgba(40,167,69,0.1);border:2px solid rgba(40,167,69,0.3);padding:20px;border-radius:12px;'>
                    <h5 style='text-align:center;color:#155724;margin-bottom:15px;'>? 근로자 부담</h5>
                    <div style='display:grid;gap:10px;'>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 건강보험</span>
                            <span style='font-weight:600;color:#28a745;'>${addComma(healthWorker)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 장기요양</span>
                            <span style='font-weight:600;color:#28a745;'>${addComma(longtermWorker)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>?? 국민연금</span>
                            <span style='font-weight:600;color:#28a745;'>${addComma(pensionWorker)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 고용보험</span>
                            <span style='font-weight:600;color:#28a745;'>${addComma(employmentWorker)}원</span>
                        </div>
                        <div style='background:rgba(40,167,69,0.2);padding:12px;border-radius:8px;text-align:center;margin-top:10px;'>
                            <div style='font-size:0.9em;color:#155724;'>총 부담액</div>
                            <div style='font-size:1.3em;font-weight:700;color:#28a745;'>${addComma(totalWorker)}원</div>
                        </div>
                    </div>
                </div>
                
                <!-- 사업주 부담 -->
                <div style='background:rgba(255,193,7,0.1);border:2px solid rgba(255,193,7,0.3);padding:20px;border-radius:12px;'>
                    <h5 style='text-align:center;color:#856404;margin-bottom:15px;'>? 사업주 부담</h5>
                    <div style='display:grid;gap:10px;'>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 건강보험</span>
                            <span style='font-weight:600;color:#856404;'>${addComma(healthEmployer)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 장기요양</span>
                            <span style='font-weight:600;color:#856404;'>${addComma(longtermEmployer)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>?? 국민연금</span>
                            <span style='font-weight:600;color:#856404;'>${addComma(pensionEmployer)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>? 고용보험</span>
                            <span style='font-weight:600;color:#856404;'>${addComma(employmentEmployer)}원</span>
                        </div>
                        <div style='background:rgba(255,255,255,0.8);padding:10px;border-radius:8px;display:flex;justify-content:space-between;'>
                            <span style='font-size:0.9em;'>?? 산재보험</span>
                            <span style='font-weight:600;color:#856404;'>${addComma(industrial)}원</span>
                        </div>
                        <div style='background:rgba(255,193,7,0.2);padding:12px;border-radius:8px;text-align:center;margin-top:10px;'>
                            <div style='font-size:0.9em;color:#856404;'>총 부담액</div>
                            <div style='font-size:1.3em;font-weight:700;color:#856404;'>${addComma(totalEmployer)}원</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style='background:rgba(102, 126, 234, 0.1);border:2px solid rgba(102, 126, 234, 0.3);padding:20px;border-radius:12px;text-align:center;'>
                <div style='font-size:1.1em;color:#495057;margin-bottom:8px;'>? 총 4대보험료 (근로자 + 사업주)</div>
                <div style='font-size:2em;font-weight:700;color:#667eea;'>${addComma(grandTotal)}원</div>
                <div style='font-size:0.9em;color:#6c757d;margin-top:10px;'>
                    실수령액 = 급여 - 근로자부담 보험료 (${addComma(salary - totalWorker)}원)
                </div>
            </div>`;
            
        // 결과 박스로 스크롤
        resultBox.scrollIntoView({ behavior: 'smooth' });
    });
    </script>
</body>
</html>
